<!DOCTYPE html>
<html>
  <head>
    <title>Attendence</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./assets/css/classes.css" />
    <link rel="stylesheet" href="./assets/css/main.css" />
  </head>
  <body>
    <div class="container">
      <div class="Navbar">
        <div>
        <svg class="qrcode" width="350" height="350" viewBox="0 0 1000 1000" fill="none" xmlns="http://www.w3.org/2000/svg">



<path id="topleft" d="M95.2344 333.333H333.333V0H0V333.333H95.2344ZM47.6198 47.6198H285.719V285.719H47.6198V47.6198Z M190.479 238.099H238.099V95.2344H95.2344V238.099H190.479Z" />


<path id="bottomleft" d="M142.854 761.901H95.2344V904.76H238.099V761.901H142.854Z M238.099 666.667H0V1000H333.333V666.667H238.099ZM285.714 952.38H47.6198V714.281H285.719V952.38H285.714Z" />


<path id="midleft" d="M47.6198 571.432H95.2344V428.568H142.854V380.953H0V476.188H47.6198V523.813H0V619.047H47.6198V571.432Z M142.854 476.188V571.432H190.479V619.047H238.099V476.188H142.854Z M333.333 428.568H428.568V476.187H476.187V428.568H571.432V380.953H619.047V190.479H571.432V333.333H523.812V380.953H476.187V333.333H428.568V285.714H380.953V380.953H190.479V428.568H238.099V476.187H285.714V428.568H333.333Z" />


<path id="topmid" d="M476.188 238.099H523.813V190.479H476.188V238.099Z M523.813 285.714H476.188V333.333H523.813V285.714Z M619.047 142.854V95.2344H571.432V47.6198H619.047V0H523.813V47.6198H476.188V0H428.568V95.2344H380.953V142.854H428.568V190.479H476.188V95.2344H523.813V190.479H571.432V142.854H619.047Z" />


<path id="mid" d="M285.714 476.188V523.813H333.333V476.188H285.714Z M571.432 523.813H619.047V476.188H571.432V523.813Z M619.047 571.432H571.432V619.047H619.047V571.432Z M714.286 523.812H666.667V619.047H714.286V523.812Z M857.146 619.047V571.432H761.901V619.047H857.146Z M809.521 666.667V714.286H761.901V619.047H714.281V666.667H666.667V619.047H619.047V714.286H571.427V619.047H523.807V523.813H428.568V476.188H380.948V523.813H333.333V571.432H285.714V619.052H380.948V571.432H428.568V619.052H380.948V809.526H428.568V857.146H476.187V761.911H428.568V666.667H476.187V714.286H523.812V809.521H571.432V761.901H619.052V809.521H666.667V857.146H714.286V809.521H761.906V761.901H857.146V666.667H809.521ZM714.286 761.901H666.667V714.281H714.286V761.901Z M904.766 761.901H857.146V857.146H952.38V809.521H904.766V761.901Z M952.38 571.432H904.766V714.286H952.38V809.521H1000V619.047H952.38V571.432Z"/>



<path id="topright" d="M666.667 428.568V476.188H714.286V380.953H619.047V428.568H666.667Z M809.521 95.2344H761.901V238.099H904.766V95.2344H809.521Z M857.146 380.953V428.568H904.766V380.953H857.146Z M904.766 428.568V476.188H761.901V523.813H1000V428.568H904.766Z M952.38 0H666.667V333.333H1000V0H952.38ZM952.38 285.714H714.281V47.6198H952.38V285.714Z" />


<path id="bottomright" d="M428.568 857.146H380.953V1000H476.188V904.76H428.568V857.146Z M523.813 904.76V857.146H476.188V904.76H523.813Z M571.432 904.76H619.047V857.146H571.432V904.76Z M571.432 1000H619.047V952.38H571.432V1000Z M666.667 1000H714.286V904.76H666.667V1000Z M761.901 904.76H809.521V857.146H761.901V904.76Z M761.901 1000H809.521V952.38H761.901V1000Z M857.146 904.76V1000H1000V952.38H952.38V904.76H857.146Z M1000 904.76V857.146H952.38V904.76H1000Z"/>
</svg>
</div>

        <a href="attendence.html">Attendence</a>
        <a href="classes.html">Classes</a>
        <a href="analytics.html">Analytics</a>
      </div>
      <div class="containerv">
        <div class="topbar">
          <div class="title"><h1 style="font-size: 35px;">AttenTaker</h1></div>
          <div class="container" style="width: fit-content;">
          <h1>Shubham Jha</h1>
          <img
            class="profile"
            src="./assets/img/man.png"
            alt="Shubham Jha"
            height="50"
            width="50"
          />
          </div>
        </div>
       
        <div class="right-container">
            <div>
                <div class="topflex">
                    <h1>Class Info</h1>
                    <div class="btn">
                    <button class="feature-button" style="background-color: #F6C23E;">Add Class</button>
                    <button class="feature-button" style="background-color: #1CC88A;">Edit Class</button>
                    <button class="feature-button" style="background-color: #E74A3B;">Delete Class</button>
                </div>
                </div>
                <hr>
    
                <select id="class" style="margin:15px" onchange="update()">
                    <option>Select Class</option>
                    <option>Class 1</option>
                    <option>Class 2</option>
                    <option>Class 3</option>
                    <option>Class 4</option>
                    <option>Class 5</option>
                    <option>Class 6</option>
                    <option>Class 7</option>
                    <option>Class 8</option>
                    <option>Class 9</option>
                    <option>Class 10</option>
                  </select>
                  <input id ="date" onchange="update()" class = "entry" type="date" />
                <br>
                <hr>
                <div class="main">
                    <table id = "students">
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Registration</th>
                            <th>Status</th>
                        </tr>
                        
                    </table>
                </div>
            </div>
        </div>
    </div>
<script>
    var table = document.getElementById("students");
    function loadDoc(cls, date) 
    {
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function() 
        {
            console.log(cls);
            console.log(date);
            if (this.readyState == 4 && this.status == 200) 
            {
                let data = this.responseText;
                let obj = JSON.parse(data);
                //iterating through each item
                if (typeof(cls) != "undefined" && typeof(date) != "undefined")
                {
                    for (let i = 0; i < obj["data"].length; i++) 
                    {
                        console.log(obj["data"][i])
                        if (obj["data"][i]["class"] == cls && obj["data"][i]["date"] == date)
                        {
                            let row = document.createElement("tr");
                            let name = document.createElement("td");
                            let email = document.createElement("td");
                            let reg = document.createElement("td");
                            let status = document.createElement("td");
                            let check = document.createElement("input");
                            check.type = "checkbox";
                            check.name = "check";
                            check.id = "check";
                            name.innerHTML = obj["data"][i]["name"];
                            email.innerHTML = obj["data"][i]["email"];
                            reg.innerHTML = obj["data"][i]["registration"];
                            if (obj["data"][i]["attendance"] == "1")
                            {
                                check.checked = true;
                            }
                            else
                            {
                                check.checked = false;
                                check.disabled = true;
                            }
                            status.appendChild(check);
                            row.appendChild(name);
                            row.appendChild(email);
                            row.appendChild(reg);
                            row.appendChild(status);
                            table.appendChild(row);
                        }
                    }
                }                 
            }
            else if (this.readyState == 4 && this.status == 404)
            {
                alert("Error");
            }
        }
    xhttp.open("GET", "data.json");
    xhttp.send();
}
function update(){
                let cls = document.getElementById("class").value;
                let date = document.getElementById("date").value;
                let table = document.getElementById("students");
                //clear the table except the first row
                while (table.rows.length > 1) 
                {
                    table.deleteRow(1);
                }
                console.log(cls,date);
                loadDoc(cls, date);
            }

</script>
  </body>
</html>
